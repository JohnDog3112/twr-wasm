<!DOCTYPE html>
<html>
    <head>
        <title>Pong</title>

        <script type="importmap">
            {
                "imports": {
                    "twr-wasm": "../../lib-js/index.js"
                }
            }
        </script>
    </head>
    <body>
        <canvas id="twr_d2dcanvas" width="900" height="600"></canvas><br>
        <a id="control_text"></a>

        <script type="module">
            const urlParams = new URLSearchParams(document.location.search);
            const gameType = urlParams.get("type");
            //resize canvas for singlePlayer pong
            if (gameType == "singlePlayer") {
               const canvas = document.getElementById("twr_d2dcanvas");
               canvas.width = 600;
               canvas.height = 600;
            }
            import {twrWasmModule, twrWasmModuleAsync} from "twr-wasm";

            import jsEventsLib from "./out/jsEventsLib.js"  // libraries use default export
            const jsEventsLibInit=new jsEventsLib();  //will register itself
            

            const is_async = window.location.hash=="#async";

            const mod = is_async ? new twrWasmModuleAsync() : new twrWasmModule();
            await mod.loadWasm(is_async ? "./entry-point-a.wasm" : "./entry-point.wasm");


            await mod.callC(["initMenu"]);

        </script>
    </body>
</html>