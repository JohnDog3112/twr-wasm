<!doctype html>
<head>
	<title>Hello World</title>
</head>
<body>
	<div id="twr_stdout" tabindex="0">Loading... <br></div>

	<script type="module">
		import {twrWasmAsyncModule} from "../../lib-js/twrasyncmod.js";
		
		let amod;
		
		try {
			amod = new twrWasmAsyncModule();
		} catch (e) {
			console.log("exception in HTML script new twrWasmAsyncModule\n");
			throw e;
		}
		document.getElementById("twr_stdout").innerHTML ="<br>";
		document.getElementById("twr_stdout").addEventListener("keypress",(ev)=>{amod.keyDownStdin(ev.which)});

		amod.loadWasm("./helloworld.wasm").then( ()=>{
			 amod.executeC(["hello"]).then( (r) => { 
				console.log("executeC returned: "+r);
			}).catch(ex=>{
				console.log("exception in HTML script loadWasm() or executeC()\n");
				throw ex;
			});
		});

	</script>
</body>
</html>
 