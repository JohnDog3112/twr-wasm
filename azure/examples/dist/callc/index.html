<!doctype html><html><head><title>callc example</title><script type="importmap">
   {
      "imports": {
      "twr-wasm": "../../lib-js/index.js"
      }
   }
   </script></head><body> <div id="twr_iodiv" tabindex="0">Loading... <br></div> <script type="module">let t;var a=globalThis,e={},r={},i=a.parcelRequire8dfc;null==i&&((i=function(t){if(t in e)return e[t].exports;if(t in r){var a=r[t];delete r[t];var i={id:t,exports:{}};return e[t]=i,a.call(i.exports,i,i.exports),i.exports}var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,a){r[t]=a},a.parcelRequire8dfc=i),(0,i.register)("5B3mp",function(t,a){t.exports=import("./../lib-js.d47c7bdb.js").then(()=>i("57pKS"))});var o={};o=new URL("../test-file.fabefebd.txt",import.meta.url).toString();try{let a;"#async"==window.location.hash?(t=new(await i("5B3mp")).twrWasmModuleAsync,document.getElementById("twr_iodiv").innerHTML="<br>",t.divLog("module type is twrWasmModuleAsync\n"),await t.loadWasm("./callc-a.wasm")):(t=new(await i("5B3mp")).twrWasmModule,document.getElementById("twr_iodiv").innerHTML="<br>",t.divLog("module type is twrWasmModule\n"),await t.loadWasm("./callc.wasm"));let e=await t.callC(["param_i32",1e5]);100001==e?t.divLog("param_i32 Success"):t.divLog("param_i32 FAIL");let r=await t.callC(["param_f64",100.2]);101.2==r?t.divLog("param_f64 Success"):t.divLog("param_f64 FAIL"),(a=await t.callC(["param_string","This is a string."]))?t.divLog("param_string Success"):t.divLog("param_string FAIL");let l=new Uint8Array(4);l[0]=99,l[1]=98,l[2]=97,l[3]=6;let s=await t.callC(["param_bytearray",l.buffer,l.length]);300==s?t.divLog("param_bytearray A Success"):t.divLog("param_bytearray A FAIL"),0==l[0]&&1==l[1]&&2==l[2]&&3==l[3]?t.divLog("param_bytearray B Success"):t.divLog("param_bytearray B FAIL");let c=new URL(o);(a=await t.callC(["param_uri",c]))?t.divLog("param_uri Success"):t.divLog("param_uri FAIL");let g=await t.callC(["ret_string"]);"forty-two - if only it were that simple"==t.getString(g)?t.divLog("ret_string Success"):t.divLog("ret_string FAIL");let n=await t.malloc(12),d=await t.malloc(4);t.setLong(n+0,1),t.mem8[n+4]=2,t.setLong(n+8,d),t.setLong(d,2e5),await t.callC(["do_struct",n]),a=(a=3==t.getLong(n+0))&&4==t.mem8[n+4];let u=t.getLong(n+8);a=(a=a&&u==d)&&200002==t.getLong(u),await t.callC(["free",d]),await t.callC(["free",n]),a?t.divLog("do_struct Success"):t.divLog("do_struct FAIL");let m=await t.callC(["get_structu32"]),L=t.getU32Arr(m);1==L[0]&&2e3==L[1]&&3==L[2]?t.divLog("get_structu32 Success"):t.divLog("get_structu32 FAIL"),m=await t.callC(["get_structu8"]);let _=t.getU8Arr(m);100==_[0]||101==_[1]||102==_[2]?t.divLog("get_structu32 Success"):t.divLog("get_structu32 FAIL")}catch(a){throw t.divLog("Unexpected exception!"),a}</script> </body></html>