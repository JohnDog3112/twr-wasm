<!doctype html><head><title>function-calls example</title><script type="module" src="/examples/function-calls/dist/index.040baedd.js"></script><script type="importmap">
	{
		"imports": {
		"tiny-wasm-runtime": "../../lib-js/index.js",
		"whatkey": "../../lib-js/whatkey.js"
		}
	}
	</script></head><body> <div id="twr_iodiv" tabindex="0">Loading... <br></div> <script type="module">let t;var e=globalThis,r={},i={},o=e.parcelRequire94c2;null==o&&((o=function(t){if(t in r)return r[t].exports;if(t in i){var e=i[t];delete i[t];var o={id:t,exports:{}};return r[t]=o,e.call(o.exports,o,o.exports),o.exports}var n=Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){i[t]=e},e.parcelRequire94c2=o),(0,o.register)("ecOAF",function(t,e){t.exports=new URL("test-file.fabefebd.txt",import.meta.url).toString()});var n=o("4mNsm");console.log("twrWasmModuleAsync");try{t=new n.twrWasmModuleAsync,document.getElementById("twr_iodiv").innerHTML="<br>",await t.loadWasm("./function-calls-a.wasm"),await t.callC(["twr_wasm_print_mem_debug_stats"]);let e=new Uint8Array(4);e[0]=99,e[1]=98,e[2]=97,e[3]=6;let r=new URL(o("ecOAF"));t.divLog("module type is twrWasmModuleAsync\n"),t.divLog("--- begin C call ---");let i=await t.callC(["function_calls","This is a string.",e.buffer,e.length,r]);if(t.divLog("--- end C call ---\n"),t.divLog("function_calls() returned: "+i),t.divLog("as string: ",t.getString(i)),"forty-two - if only it were that simple"!=t.getString(i))throw Error("42 error");i=await t.callC(["get_structu32"]),t.divLog("get_struct32() returned: "+i);let l=t.getU32Arr(i);if(t.divLog("three 32 bit ints are: ",l[0],l[1],l[2]),1!=l[0]||2e3!=l[1]||3!=l[2])throw Error("error");i=await t.callC(["get_structu8"]),t.divLog("get_struct8() returned: "+i);let a=t.getU8Arr(i);if(t.divLog("three 8 bit ints are: ",a[0],a[1],a[2]),100!=a[0]||101!=a[1]||102!=a[2])throw Error("error")}catch(e){throw t.divLog("unexpected exception"),e}</script> </body>