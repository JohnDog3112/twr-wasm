<!doctype html><head><title>function-calls example</title><script type="module" src="/examples/function-calls/dist/index.15322f57.js"></script><script type="importmap">
	{
		"imports": {
		"tiny-wasm-runtime": "../../lib-js/index.js",
		"whatkey": "../../lib-js/whatkey.js"
		}
	}
	</script></head><body> <div id="twr_iodiv" tabindex="0">Loading... <br></div> <script type="module">let e;var t=globalThis,r={},i={},o=t.parcelRequire94c2;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in i){var t=i[e];delete i[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){i[e]=t},t.parcelRequire94c2=o),(0,o.register)("ecOAF",function(e,t){e.exports=new URL("test-file.fabefebd.txt",import.meta.url).toString()});var n=o("4mNsm");console.log("twrWasmModuleAsync");try{e=new n.twrWasmModuleAsync,document.getElementById("twr_iodiv").innerHTML="<br>",await e.loadWasm("./function-calls-a.wasm"),await e.executeC(["twr_wasm_print_mem_debug_stats"]);let t=new Uint8Array(4);t[0]=99,t[1]=98,t[2]=97,t[3]=6;let r=new URL(o("ecOAF"));e.divLog("module type is twrWasmModuleAsync\n"),e.divLog("--- begin C call ---");let i=await e.executeC(["function_calls","This is a string.",t.buffer,t.length,r]);if(e.divLog("--- end C call ---\n"),e.divLog("function_calls() returned: "+i),e.divLog("as string: ",e.getString(i)),"forty-two - if only it were that simple"!=e.getString(i))throw Error("42 error");i=await e.executeC(["get_structu32"]),e.divLog("get_struct32() returned: "+i);let a=e.getU32Arr(i);if(e.divLog("three 32 bit ints are: ",a[0],a[1],a[2]),1!=a[0]||2e3!=a[1]||3!=a[2])throw Error("error");i=await e.executeC(["get_structu8"]),e.divLog("get_struct8() returned: "+i);let l=e.getU8Arr(i);if(e.divLog("three 8 bit ints are: ",l[0],l[1],l[2]),100!=l[0]||101!=l[1]||102!=l[2])throw Error("error")}catch(t){throw e.divLog("unexpected exception"),t}</script> </body>